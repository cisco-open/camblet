# python plain tls on port 7000
- selectors:
  - linux:binary:name: [python3.10, python3.11]
    destination:port: 7000
  properties:
    mtls: false
    workloadID: pythonwithoutmtls

# nginx or python on port 8000
- selectors:
  # local nginx
  - linux:uid: 33
    linux:binary:name: nginx
    destination:port: 8000
  # local nginx in docker
  - linux:uid: 101
    linux:binary:name: nginx
    docker:image:name:nginx: true
    destination:port: 80
  # local python or go file-server
  - linux:uid: [501, 1001]
    linux:binary:name: [python3.10, python3.11, file-server]
    destination:port: 8000
  properties:
    mtls: true
    workloadID: accounting/department-a/important-backend
    dns:
    - a.acme.corp
    - b.acme.corp
  policy:
    spiffeID:
    - spiffe://{{.TrustDomain}}/accounting
    - spiffe://{{.TrustDomain}}/curl

# curl or wrk connection to port 8000 or 8080
- selectors:
  - linux:uid: [501, 1001]
    linux:binary:name: [curl, wrk, wget]
    destination:port: [8000, 8080]
  properties:
    mtls: true
    workloadID: curl
